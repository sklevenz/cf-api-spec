post:
  tags:
    - Buildpacks
  summary: Create a buildpack
  description: Create a new buildpack
  operationId: createBuildpack
  requestBody:
    description: Buildpack object that needs to be added
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            name:
              type: string
              description: The name of the buildpack
            stack:
              type: string
              description: The stack the buildpack is compatible with
            position:
              type: integer
              description: The position of the buildpack in the order of execution
            state:
              type: string
              description: The state of the buildpack
              enum:
                - AWAITING_UPLOAD
                - READY
            enabled:
              type: boolean
              description: Whether the buildpack is enabled
            locked:
              type: boolean
              description: Whether the buildpack is locked
            filename:
              type: string
              description: The filename of the buildpack
          required:
            - name
          description: Request schema for creating a buildpack
        examples:
          buildpack:
            summary: A sample buildpack
            value:
              name: ruby_buildpack
              stack: cflinuxfs3
              position: 1
              enabled: true
              state: AWAITING_UPLOAD
              locked: false
              filename: ruby_buildpack-cflinuxfs3-v1.0.0.zip
  responses:
    '201':
      description: Successfully created buildpack
      content:
        application/json:
          schema:
            $ref: >-
              #/paths/~1v3~1buildpacks~1%7Bguid%7D/patch/responses/200/content/application~1json/schema
          examples:
            buildpack:
              summary: A sample buildpack
              value:
                guid: d5ccf6b2-3b8e-4b8e-8b8e-8b8e8b8e8b8e
                created_at: '2023-10-01T12:00:00Z'
                updated_at: '2023-10-01T12:00:00Z'
                name: ruby_buildpack
                stack: cflinuxfs3
                position: 1
                enabled: true
                locked: false
                state: AWAITING_UPLOAD
                filename: ruby_buildpack-cflinuxfs3-v1.0.0.zip
                links:
                  self:
                    href: >-
                      https://api.example.local/v3/buildpacks/d5ccf6b2-3b8e-4b8e-8b8e-8b8e8b8e8b8e
                  upload:
                    href: >-
                      https://api.example.local/v3/buildpacks/d5ccf6b2-3b8e-4b8e-8b8e-8b8e8b8e8b8e/upload
                    method: POST
                metadata:
                  labels:
                    some: label
                  annotations:
                    some: annotation
    # '400':
    #   description: Bad request
    #   content:
    #     application/json:
    #       schema:
    #         $ref: >-
    #           #/paths/~1v3~1users/get/responses/400/content/application~1json/schema
    #       example:
    #         errors:
    #           $ref: >-
    #             #/paths/~1v3~1users/post/responses/400/content/application~1json/example/errors
  security:
    - oauth:
        - cloud_controller.write
get:
  tags:
    - Buildpacks
  summary: List buildpacks
  description: Retrieve a list of buildpacks available in the system.
  operationId: listBuildpacks
  parameters:
    - $ref: ../components/parameters/page.yaml
    - $ref: ../components/parameters/perPage.yaml
    - $ref: ../components/parameters/orderBy.yaml
    - $ref: ../components/parameters/createdAts.yaml
    - $ref: ../components/parameters/updatedAts.yaml
    - $ref: ../components/parameters/labelSelector.yaml
    - name: name
      in: query
      schema:
        type: array
        items:
          type: string
      description: |
        Comma-delimited list of buildpack names to filter by
    - name: stacks
      in: query
      schema:
        type: array
        items:
          type: string
      description: |
        Comma-delimited list of stacks to filter by
  responses:
    '200':
      description: List of buildpacks
      content:
        application/json:
          schema:
            type: object
            properties:
              pagination:
                type: object
                properties:
                  total_results:
                    type: integer
                    description: The total number of results available
                  total_pages:
                    type: integer
                    description: The total number of pages available
                  first:
                    allOf:
                      - $ref: >-
                          #/paths/~1v3~1buildpacks~1%7Bguid%7D/patch/responses/200/content/application~1json/schema/allOf/1/properties/links/properties/self/allOf/0
                      - description: The first page of results
                  last:
                    allOf:
                      - $ref: >-
                          #/paths/~1v3~1buildpacks~1%7Bguid%7D/patch/responses/200/content/application~1json/schema/allOf/1/properties/links/properties/self/allOf/0
                      - description: The last page of results
                  next:
                    allOf:
                      - $ref: >-
                          #/paths/~1v3~1buildpacks~1%7Bguid%7D/patch/responses/200/content/application~1json/schema/allOf/1/properties/links/properties/self/allOf/0
                      - description: The next page of results
                  previous:
                    allOf:
                      - $ref: >-
                          #/paths/~1v3~1buildpacks~1%7Bguid%7D/patch/responses/200/content/application~1json/schema/allOf/1/properties/links/properties/self/allOf/0
                      - description: The previous page of results
                description: >
                  Pagination is a technique used to divide a large set of
                  results into smaller, more manageable sets. This allows
                  clients to retrieve results in smaller chunks, reducing the
                  amount of data transferred and improving performance.

                  The pagination object is a JSON object that contains
                  information about the pagination state of the results. It
                  includes the total number of results available, the total
                  number of pages available, and links to the first, last, next,
                  and previous pages of results.
              resources:
                type: array
                items:
                  $ref: >-
                    #/paths/~1v3~1buildpacks~1%7Bguid%7D/patch/responses/200/content/application~1json/schema
    '401':
      $ref: '#/paths/~1v3~1users/get/responses/401'
    '403':
      $ref: '#/paths/~1v3~1users/get/responses/403'
    '500':
      $ref: '#/paths/~1v3~1users/post/responses/500'
