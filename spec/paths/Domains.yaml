/v3/domains:
  get:
    summary: List domains
    description: Retrieve all domains the user has access to.
    operationId: listDomains
    tags:
    - Domains
    parameters:
    - $ref: '../components/parameters/Page.yaml'
    - $ref: '../components/parameters/PerPage.yaml'
    - $ref: '../components/parameters/OrderBy.yaml'
    - $ref: '../components/parameters/CreatedAts.yaml'
    - $ref: '../components/parameters/UpdatedAts.yaml'
    - $ref: '../components/parameters/LabelSelector.yaml'
    - name: guids
      in: query
      schema:
        type: array
        items:
          type: string
      description: Comma-delimited list of GUIDs to filter by
    - name: names
      in: query
      schema:
        type: array
        items:
          type: string
      description: Comma-delimited list of domain names to filter by
    - name: organization_guids
      in: query
      schema:
        type: array
        items:
          type: string
      description: Comma-delimited list of owning organization GUIDs to filter by
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '../components/schemas/DomainList.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '403':
        $ref: '../components/responses/Forbidden.yaml'
      '400':
        $ref: '../components/responses/BadRequest.yaml'
      '500':
        $ref: '../components/responses/500.yaml'
      '502':
        $ref: '../components/responses/BadGateway.yaml'
      '503':
        $ref: '../components/responses/ServiceUnavailable.yaml'
      '422':
        $ref: '../components/responses/UnprocessableEntity.yaml'
      '409':
        $ref: '../components/responses/Conflict.yaml'
  post:
    summary: Create a domain
    description: Create a domain.
    operationId: createDomain
    tags:
    - Domains
    requestBody:
      $ref: '../components/requestBodies/DomainCreateRequestBody.yaml'
    responses:
      '201':
        description: Successfully created domain
        content:
          application/json:
            schema:
              $ref: '../components/schemas/Domain.yaml'
        links:
          organization:
            operationId: getOrganization
            parameters:
              guid: $response.body#/relationships/organization/data/guid
            description: Retrieve the organization for this domain (private domains
              only)
      '400':
        $ref: '../components/responses/BadRequest.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '403':
        $ref: '../components/responses/Forbidden.yaml'
      '422':
        $ref: '../components/responses/UnprocessableEntity.yaml'
      '503':
        $ref: '../components/responses/ServiceUnavailable.yaml'
      '500':
        $ref: '../components/responses/500.yaml'
      '409':
        $ref: '../components/responses/Conflict.yaml'
/v3/domains/{guid}:
  get:
    summary: Get a domain
    description: Retrieve a domain.
    operationId: getDomain
    tags:
    - Domains
    parameters:
    - $ref: '../components/parameters/Guid.yaml'
    responses:
      '200':
        description: Successfully retrieved domain
        content:
          application/json:
            schema:
              $ref: '../components/schemas/Domain.yaml'
        links:
          organization:
            operationId: getOrganization
            parameters:
              guid: $response.body#/relationships/organization/data/guid
            description: Retrieve the organization for this domain (private domains
              only)
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
      '403':
        $ref: '../components/responses/Forbidden.yaml'
  patch:
    summary: Update a domain
    description: Update a domain.
    operationId: updateDomain
    tags:
    - Domains
    parameters:
    - $ref: '../components/parameters/Guid.yaml'
    requestBody:
      description: Domain object that needs to be updated
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: '../components/schemas/Metadata.yaml'
            description: Request schema for updating a domain
    responses:
      '200':
        description: Successfully updated domain
        content:
          application/json:
            schema:
              $ref: '../components/schemas/Domain.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '403':
        $ref: '../components/responses/Forbidden.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
      '422':
        $ref: '../components/responses/UnprocessableEntity.yaml'
      '400':
        $ref: '../components/responses/BadRequest.yaml'
      '500':
        $ref: '../components/responses/500.yaml'
      '503':
        $ref: '../components/responses/ServiceUnavailable.yaml'
      '409':
        $ref: '../components/responses/Conflict.yaml'
  delete:
    summary: Delete a domain
    description: Delete a domain.
    operationId: deleteDomain
    tags:
    - Domains
    parameters:
    - $ref: '../components/parameters/Guid.yaml'
    responses:
      '202':
        description: Accepted
        headers:
          Location:
            description: URL of the job that is deleting the domain
            schema:
              type: string
              format: uri
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
      '403':
        $ref: '../components/responses/Forbidden.yaml'
      '422':
        $ref: '../components/responses/UnprocessableEntity.yaml'
      '500':
        $ref: '../components/responses/500.yaml'
/v3/domains/{guid}/relationships/shared_organizations:
  post:
    summary: Share a domain
    description: This endpoint shares an organization-scoped domain to other organizations
      specified by a list of organization guids. This will allow any of the other
      organizations to use the organization-scoped domain.
    operationId: shareDomain
    tags:
    - Domains
    parameters:
    - $ref: '../components/parameters/Guid.yaml'
    requestBody:
      description: List of organizations to share the domain with
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '../components/schemas/Relationship.yaml'
            description: Organization relationships; each organization will be entitled
              to manage this isolation segment
    responses:
      '200':
        description: Successfully shared domain
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: array
                items:
                  type: object
                  properties:
                    guid:
                      type: string
                      format: uuid
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
      '422':
        $ref: '../components/responses/UnprocessableEntity.yaml'
      '403':
        $ref: '../components/responses/Forbidden.yaml'
/v3/organizations/{guid}/domains:
  get:
    summary: List domains for an organization
    description: 'Retrieve all domains available in an organization for the current
      user. This will return unscoped domains (those without an owning organization),
      domains that are scoped to the given organization (owned by the given organization),
      and domains that have been shared with the organization.


      To retrieve the default domain for an organization, use the [get default domain](#get-default-domain)
      endpoint.'
    operationId: listDomainsForOrganization
    tags:
    - Domains
    parameters:
    - $ref: '../components/parameters/Guid.yaml'
    - $ref: '../components/parameters/Page.yaml'
    - $ref: '../components/parameters/PerPage.yaml'
    - $ref: '../components/parameters/OrderBy.yaml'
    - name: names
      in: query
      schema:
        type: array
        items:
          type: string
      description: Comma-delimited list of domain names to filter by
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              $ref: '../components/schemas/DomainList.yaml'
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
      '403':
        $ref: '../components/responses/Forbidden.yaml'
/v3/domains/{guid}/route_reservations:
  get:
    summary: Check reserved routes for a domain
    description: Check if a specific route for a domain exists, regardless of the
      userâ€™s visibility for the route in case the route belongs to a space the user
      does not belong to.
    operationId: checkReservedRoutesForDomain
    tags:
    - Domains
    parameters:
    - $ref: '../components/parameters/Guid.yaml'
    - name: host
      in: query
      schema:
        type: string
      description: Hostname to filter by
    - name: path
      in: query
      schema:
        type: string
      description: Path to filter by
    - name: port
      in: query
      schema:
        type: integer
      description: Port to filter by
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              type: object
              properties:
                matching_route:
                  type: boolean
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
      '403':
        $ref: '../components/responses/Forbidden.yaml'
/v3/domains/{guid}/relationships/shared_organizations/{org_guid}:
  delete:
    summary: Unshare a domain
    description: This endpoint removes an organization from the list of organizations
      an organization-scoped domain is shared with. This prevents the organization
      from using the organization-scoped domain.
    operationId: unshareDomain
    tags:
    - Domains
    parameters:
    - $ref: '../components/parameters/Guid.yaml'
    - name: org_guid
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: The GUID of the organization to unshare the domain from
    responses:
      '204':
        description: Successfully unshared domain
      '401':
        $ref: '../components/responses/Unauthorized.yaml'
      '404':
        $ref: '../components/responses/NotFound.yaml'
      '422':
        $ref: '../components/responses/UnprocessableEntity.yaml'
      '403':
        $ref: '../components/responses/Forbidden.yaml'
